(this.webpackJsonpshoppies=this.webpackJsonpshoppies||[]).push([[0],{25:function(e,n,t){},31:function(e,n,t){},33:function(e,n,t){},35:function(e,n,t){},36:function(e,n,t){},64:function(e,n,t){"use strict";t.r(n);var a=t(0),s=t.n(a),i=t(7),c=t.n(i),o=(t(25),t(9)),r=t(11),l=t(4);l.c;var u=t(6),m=t(5),d=Object(m.c)({name:"nominations",initialState:{nominations:[]},reducers:{addNomination:function(e,n){var t=n.payload;5!==e.nominations.length&&(e.nominations.findIndex((function(e){return e.imdbID===t.imdbID}))<0&&e.nominations.push(t))},removeNomination:function(e,n){var t=n.payload,a=e.nominations.findIndex((function(e){return e.imdbID===t.id}));a>=0&&e.nominations.splice(a,1)}}}),b=d.actions,j=b.addNomination,f=b.removeNomination,h=function(e){return e.nominations.nominations},v=d.reducer,O=t(16),p=t.n(O),x=t(18);function N(e){return Object(u.a)(new Map(e.map((function(e){return[e.imdbID,e]}))).values())}var g={Search:[],totalResults:"0",Response:"False",pageNumber:0},_=Object(m.b)("movies/fetch",function(){var e=Object(x.a)(p.a.mark((function e(n,t){var a,s,i,c,o,r,l,u,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.selection){e.next=2;break}return e.abrupt("return",g);case 2:return d=n.selection,a=d.trim().replaceAll(" ","+"),s="https://www.omdbapi.com/?apikey=ca4f8507&type=movie&s=".concat(a),i="&page=".concat(n.page),e.next=7,fetch(s+i);case 7:if(200===(c=e.sent).status){e.next=10;break}return e.abrupt("return",t.rejectWithValue({message:"Failed to fetch movies."}));case 10:return e.next=12,c.json();case 12:if(o=e.sent,r=o.Response,l=o.totalResults,u=o.Search,"False"!==r){e.next=16;break}return e.abrupt("return",g);case 16:return m=N(u),e.abrupt("return",{Search:m,Response:r,totalResults:l,pageNumber:n.page});case 18:case"end":return e.stop()}var d}),e)})));return function(n,t){return e.apply(this,arguments)}}()),I=Object(m.c)({name:"movieResults",initialState:{status:"idle",error:null,movies:[],totalResults:0,pageNumber:0},reducers:{},extraReducers:function(e){e.addCase(_.pending,(function(e){e.status="loading",e.error=null})),e.addCase(_.fulfilled,(function(e,n){var t=n.payload;t.pageNumber>1?e.movies=N([].concat(Object(u.a)(e.movies),Object(u.a)(t.Search))):e.movies=Object(u.a)(t.Search),e.status="idle",e.pageNumber=t.pageNumber,e.totalResults=Number.parseInt(t.totalResults)})),e.addCase(_.rejected,(function(e,n){n.payload;e.status="idle"}))}}),w=function(e){return e.movies.movies},k=function(e){return e.movies.status},R=function(e){return e.movies.pageNumber},y=function(e){return Math.ceil(e.movies.totalResults/10)},S=I.reducer,C=Object(u.a)(Object(m.d)()),D=Object(m.a)({reducer:{nominations:v,movies:S},middleware:C,devTools:!1}),T=l.c,B=t(20),F=(t(31),t(1)),A=function(e){var n=Object(l.b)(),t=e.Title,a=e.Year,s=e.imdbID;return Object(F.jsxs)("section",{className:"nomination-card card",children:[Object(F.jsxs)("section",{className:"nomination-card_info",children:[Object(F.jsx)("span",{className:"nomination-card_info_title",children:t}),Object(F.jsx)("span",{className:"nomination-card_info_year",children:a})]}),Object(F.jsx)("div",{className:"nomination-card_remove-btn",onClick:function(){return n(f({id:s}))},children:Object(F.jsx)(B.a,{className:"nomination-card_remove-btn_icon"})})]})};t(33);function E(){var e=T(h);return Object(F.jsxs)("section",{className:"nominations",children:[Object(F.jsx)("h3",{className:"nominations_title",children:"Nominations"}),e.length?Object(F.jsx)("ul",{className:"nominations_movie-list",children:e.map((function(e){return Object(F.jsx)("li",{className:"movie",children:Object(F.jsx)(A,Object(o.a)({},e))},e.imdbID)}))}):Object(F.jsx)("h4",{className:"nominations_no-noms",children:"First search for a movie, and then nominate!"})]})}t(34),t(35);var L=t(12),M=function(e){var n=Object(l.b)(),t=T(h);L.a.configure();var a=e.Title,s=e.Year,i=e.Poster,c=e.imdbID,o=!1;t.find((function(e){return e.imdbID===c}))&&(o=!0);return Object(F.jsxs)("section",{className:"movie-card card",children:[Object(F.jsx)("img",{alt:"NO PHOTO AVAILABLE",className:"movie-card_img",src:i}),Object(F.jsxs)("section",{className:"movie-card_details",children:[Object(F.jsxs)("section",{className:"movie-card_details_info",children:[Object(F.jsx)("h3",{className:"movie-card_details_info_title",children:a}),Object(F.jsx)("h4",{className:"movie-card_details_info_year",children:s})]}),Object(F.jsx)("button",{disabled:o,className:"movie-card_details_nominate-btn",onClick:function(){5!==t.length?(n(j(e)),L.a.success("Movie nominated!",{className:"success-toast",autoClose:3e3})):L.a.error("Limit of five nominations",{className:"error-toast",position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0})},children:"Nominate "})]})]})},P=(t(36),t(19));var W=function(){var e=Object(l.b)(),n=Object(a.useState)(""),t=Object(r.a)(n,2),s=t[0],i=t[1],c=function(e,n){var t=Object(a.useState)(e),s=Object(r.a)(t,2),i=s[0],c=s[1];return Object(a.useEffect)((function(){var t=setTimeout((function(){c(e)}),n);return function(){clearTimeout(t)}}),[e,n]),i}(s,500),u=T(k),m=T(w),d=Object(a.useRef)(null),b=T(y),j=T(R),f=Object(a.useCallback)((function(n){"loading"!==u&&(d.current&&d.current.disconnect(),d.current=new IntersectionObserver((function(n){var t=j!==b;n[0].isIntersecting&&t&&e(_({selection:s,page:j+1}))})),n&&d.current.observe(n))}),[j,u]);return Object(a.useEffect)((function(){e(_(c?{selection:s,page:1}:{selection:"",page:1}))}),[c]),console.log("loading"===u),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("section",{className:"navbar",children:[Object(F.jsx)("h1",{className:"navbar_title",children:"The Shoppies"}),Object(F.jsx)("input",{className:"navbar_input",type:"text",value:s,placeholder:"Search movie...",onChange:function(e){return i(e.target.value)}})]}),Object(F.jsx)(E,{}),Object(F.jsx)("section",{className:"navbar_status-indicator",children:Object(F.jsx)(P.BeatLoader,{loading:"loading"===u})}),Object(F.jsx)("section",{className:"search-results",children:Object(F.jsx)("ul",{className:"search-results_movie-list list",children:m.map((function(e,n){return m.length===n+1?Object(F.jsx)("li",{ref:f,className:"movie",children:Object(F.jsx)(M,Object(o.a)({},e))},e.imdbID):Object(F.jsx)("li",{className:"movie",children:Object(F.jsx)(M,Object(o.a)({},e))},e.imdbID)}))})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(F.jsx)(s.a.StrictMode,{children:Object(F.jsx)(l.a,{store:D,children:Object(F.jsx)(W,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.2e221114.chunk.js.map