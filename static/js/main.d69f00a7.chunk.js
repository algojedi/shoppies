(this.webpackJsonpshoppies=this.webpackJsonpshoppies||[]).push([[0],{21:function(e,n,t){},27:function(e,n,t){},29:function(e,n,t){},31:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var a=t(0),s=t.n(a),i=t(5),c=t.n(i),r=(t(21),t(7)),o=t(9),l=t(2);l.c;var u=t(4),m=t(3),d=Object(m.c)({name:"nominations",initialState:{nominations:[]},reducers:{addNomination:function(e,n){var t=n.payload;5!==e.nominations.length&&(e.nominations.findIndex((function(e){return e.imdbID===t.imdbID}))<0&&e.nominations.push(t))},removeNomination:function(e,n){var t=n.payload,a=e.nominations.findIndex((function(e){return e.imdbID===t.id}));a>=0&&e.nominations.splice(a,1)}}}),b=d.actions,j=b.addNomination,f=b.removeNomination,h=function(e){return e.nominations.nominations},v=d.reducer,O=t(14),p=t.n(O),x=t(15);function N(e){return Object(u.a)(new Map(e.map((function(e){return[e.imdbID,e]}))).values())}var g={Search:[],totalResults:"0",Response:"False",pageNumber:0},_=Object(m.b)("movies/fetch",function(){var e=Object(x.a)(p.a.mark((function e(n,t){var a,s,i,c,r,o,l,u,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.selection){e.next=2;break}return e.abrupt("return",g);case 2:return d=n.selection,a=d.trim().replaceAll(" ","+"),s="https://www.omdbapi.com/?apikey=ca4f8507&type=movie&s=".concat(a),i="&page=".concat(n.page),e.next=7,fetch(s+i);case 7:if(200===(c=e.sent).status){e.next=10;break}return e.abrupt("return",t.rejectWithValue({message:"Failed to fetch movies."}));case 10:return e.next=12,c.json();case 12:if(r=e.sent,o=r.Response,l=r.totalResults,u=r.Search,"False"!==o){e.next=16;break}return e.abrupt("return",g);case 16:return m=N(u),e.abrupt("return",{Search:m,Response:o,totalResults:l,pageNumber:n.page});case 18:case"end":return e.stop()}var d}),e)})));return function(n,t){return e.apply(this,arguments)}}()),I=Object(m.c)({name:"movieResults",initialState:{status:"idle",error:null,movies:[],totalResults:0,pageNumber:0},reducers:{},extraReducers:function(e){e.addCase(_.pending,(function(e){e.status="loading",e.error=null})),e.addCase(_.fulfilled,(function(e,n){var t=n.payload;t.pageNumber>1?e.movies=N([].concat(Object(u.a)(e.movies),Object(u.a)(t.Search))):e.movies=Object(u.a)(t.Search),e.status="idle",e.pageNumber=t.pageNumber,e.totalResults=Number.parseInt(t.totalResults)})),e.addCase(_.rejected,(function(e,n){n.payload;e.status="idle"}))}}),w=function(e){return e.movies.movies},k=function(e){return e.movies.status},R=function(e){return e.movies.pageNumber},y=function(e){return Math.ceil(e.movies.totalResults/10)},S=I.reducer,C=Object(u.a)(Object(m.d)()),D=Object(m.a)({reducer:{nominations:v,movies:S},middleware:C,devTools:!1}),T=l.c,F=t(16),A=(t(27),t(1)),B=function(e){var n=Object(l.b)(),t=e.Title,a=e.Year,s=e.imdbID;return Object(A.jsxs)("section",{className:"nomination-card card",children:[Object(A.jsxs)("section",{className:"nomination-card_info",children:[Object(A.jsx)("span",{className:"nomination-card_info_title",children:t}),Object(A.jsx)("span",{className:"nomination-card_info_year",children:a})]}),Object(A.jsx)("div",{className:"nomination-card_remove-btn",onClick:function(){return n(f({id:s}))},children:Object(A.jsx)(F.a,{className:"nomination-card_remove-btn_icon"})})]})};t(29);function E(){var e=T(h);return Object(A.jsxs)("section",{className:"nominations",children:[Object(A.jsx)("h3",{className:"nominations_title",children:"Nominations"}),e.length?Object(A.jsx)("ul",{className:"nominations_movie-list",children:e.map((function(e){return Object(A.jsx)("li",{className:"movie",children:Object(A.jsx)(B,Object(r.a)({},e))},e.imdbID)}))}):Object(A.jsx)("h4",{className:"nominations_no-noms",children:"First search for a movie, and then nominate!"})]})}t(30),t(31);var M=t(10),L=function(e){var n=Object(l.b)(),t=T(h);M.a.configure();var a=e.Title,s=e.Year,i=e.Poster,c=e.imdbID,r=!1;t.find((function(e){return e.imdbID===c}))&&(r=!0);return Object(A.jsxs)("section",{className:"movie-card card",children:[Object(A.jsx)("img",{alt:"NO PHOTO AVAILABLE",className:"movie-card_img",src:i}),Object(A.jsxs)("section",{className:"movie-card_details",children:[Object(A.jsxs)("section",{className:"movie-card_details_info",children:[Object(A.jsx)("h3",{className:"movie-card_details_info_title",children:a}),Object(A.jsx)("h4",{className:"movie-card_details_info_year",children:s})]}),Object(A.jsx)("button",{disabled:r,className:"movie-card_details_nominate-btn",onClick:function(){5!==t.length?(n(j(e)),M.a.success("Movie nominated!",{className:"success-toast",autoClose:3e3})):M.a.error("Limit of five nominations",{className:"error-toast",position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0})},children:"Nominate "})]})]})};t(32);var P=function(){var e=Object(l.b)(),n=Object(a.useState)(""),t=Object(o.a)(n,2),s=t[0],i=t[1],c=function(e,n){var t=Object(a.useState)(e),s=Object(o.a)(t,2),i=s[0],c=s[1];return Object(a.useEffect)((function(){var t=setTimeout((function(){c(e)}),n);return function(){clearTimeout(t)}}),[e,n]),i}(s,500),u=T(k),m=T(w),d=Object(a.useRef)(null),b=T(y),j=T(R),f=Object(a.useCallback)((function(n){"loading"!==u&&(d.current&&d.current.disconnect(),d.current=new IntersectionObserver((function(n){var t=j!==b;n[0].isIntersecting&&t&&e(_({selection:s,page:j+1}))})),n&&d.current.observe(n))}),[j,u]);return Object(a.useEffect)((function(){e(_(c?{selection:s,page:1}:{selection:"",page:1}))}),[c]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("section",{className:"navbar",children:[Object(A.jsx)("h1",{className:"navbar_title",children:"The Shoppies"}),Object(A.jsx)("input",{className:"navbar_input",type:"text",value:s,placeholder:"Search movie...",onChange:function(e){return i(e.target.value)}})]}),Object(A.jsx)(E,{}),Object(A.jsx)("section",{className:"search-results",children:Object(A.jsx)("ul",{className:"search-results_movie-list list",children:m.map((function(e,n){return m.length===n+1?Object(A.jsx)("li",{ref:f,className:"movie",children:Object(A.jsx)(L,Object(r.a)({},e))},e.imdbID):Object(A.jsx)("li",{className:"movie",children:Object(A.jsx)(L,Object(r.a)({},e))},e.imdbID)}))})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(A.jsx)(s.a.StrictMode,{children:Object(A.jsx)(l.a,{store:D,children:Object(A.jsx)(P,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.d69f00a7.chunk.js.map