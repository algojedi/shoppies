(this.webpackJsonpshoppies=this.webpackJsonpshoppies||[]).push([[0],{21:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(5),c=n.n(s),r=(n(21),n(7)),o=n(9),l=n(2);l.c;var u=n(4),m=n(3),d=Object(m.c)({name:"nominations",initialState:{nominations:[]},reducers:{addNomination:function(e,t){var n=t.payload;5!==e.nominations.length&&(e.nominations.findIndex((function(e){return e.imdbID===n.imdbID}))<0&&e.nominations.push(n))},removeNomination:function(e,t){var n=t.payload,a=e.nominations.findIndex((function(e){return e.imdbID===n.id}));a>=0&&e.nominations.splice(a,1)}}}),b=d.actions,j=b.addNomination,f=b.removeNomination,v=function(e){return e.nominations.nominations},h=d.reducer,p=n(13),O=n.n(p),x=n(15);function N(e){return Object(u.a)(new Map(e.map((function(e){return[e.imdbID,e]}))).values())}var g={Search:[],totalResults:"0",Response:"False",pageNumber:0},_=Object(m.b)("movies/fetch",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var a,i,s,c,r,o,l,u,m;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.selection){e.next=2;break}return e.abrupt("return",g);case 2:return d=t.selection,a=d.trim().replaceAll(" ","+"),i="https://www.omdbapi.com/?apikey=ca4f8507&type=movie&s=".concat(a),s="&page=".concat(t.page),e.next=7,fetch(i+s);case 7:if(200===(c=e.sent).status){e.next=10;break}return e.abrupt("return",n.rejectWithValue({message:"Failed to fetch movies."}));case 10:return e.next=12,c.json();case 12:if(r=e.sent,o=r.Response,l=r.totalResults,u=r.Search,"False"!==o){e.next=16;break}return e.abrupt("return",g);case 16:return m=N(u),e.abrupt("return",{Search:m,Response:o,totalResults:l,pageNumber:t.page});case 18:case"end":return e.stop()}var d}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(m.c)({name:"movieResults",initialState:{status:"idle",error:null,movies:[],totalResults:0,pageNumber:0},reducers:{},extraReducers:function(e){e.addCase(_.pending,(function(e){e.status="loading",e.error=null})),e.addCase(_.fulfilled,(function(e,t){var n=t.payload;n.pageNumber>1?e.movies=N([].concat(Object(u.a)(e.movies),Object(u.a)(n.Search))):e.movies=Object(u.a)(n.Search),e.status="idle",e.pageNumber=n.pageNumber,e.totalResults=Number.parseInt(n.totalResults)})),e.addCase(_.rejected,(function(e,t){t.payload;e.status="idle"}))}}),w=function(e){return e.movies.movies},k=function(e){return e.movies.status},R=function(e){return e.movies.pageNumber},y=function(e){return Math.ceil(e.movies.totalResults/10)},S=I.reducer,D=Object(u.a)(Object(m.d)()),C=Object(m.a)({reducer:{nominations:h,movies:S},middleware:D,devTools:!1}),T=l.c,A=n(16),B=(n(27),n(1)),E=function(e){var t=Object(l.b)(),n=e.Title,a=e.Year,i=e.imdbID;return Object(B.jsxs)("section",{className:"nomination-card card",children:[Object(B.jsxs)("section",{className:"nomination-card_info",children:[Object(B.jsx)("span",{className:"nomination-card_info_title",children:n}),Object(B.jsx)("span",{className:"nomination-card_info_year",children:a})]}),Object(B.jsx)("div",{className:"nomination-card_remove-btn",onClick:function(){return t(f({id:i}))},children:Object(B.jsx)(A.a,{className:"nomination-card_remove-btn_icon"})})]})};n(29);function F(){var e=T(v);return Object(B.jsxs)("section",{className:"nominations",children:[Object(B.jsx)("h3",{className:"nominations_title",children:"Nominations"}),Object(B.jsx)("ul",{className:"nominations_movie-list",children:e.map((function(e){return Object(B.jsx)("li",{className:"movie",children:Object(B.jsx)(E,Object(r.a)({},e))},e.imdbID)}))})]})}n(30),n(31);var L=n(14),M=function(e){var t=Object(l.b)(),n=T(v);L.a.configure();var a=e.Title,i=e.Year,s=e.Poster,c=e.imdbID,r=!1;n.find((function(e){return e.imdbID===c}))&&(r=!0);return Object(B.jsxs)("section",{className:"movie-card card",children:[Object(B.jsx)("img",{alt:"NO PHOTO AVAILABLE",className:"movie-card_img",src:s}),Object(B.jsxs)("section",{className:"movie-card_details",children:[Object(B.jsxs)("section",{className:"movie-card_details_info",children:[Object(B.jsx)("h3",{className:"movie-card_details_info_title",children:a}),Object(B.jsx)("h4",{className:"movie-card_details_info_year",children:i})]}),Object(B.jsx)("button",{disabled:r,className:"movie-card_details_nominate-btn",onClick:function(){5!==n.length?t(j(e)):L.a.error("Limit of five nominations",{className:"error-toast",position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0})},children:"Nominate "})]})]})};n(32);var P=function(){var e=Object(l.b)(),t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],s=n[1],c=function(e,t){var n=Object(a.useState)(e),i=Object(o.a)(n,2),s=i[0],c=i[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[e,t]),s}(i,500),u=T(k),m=T(w),d=Object(a.useRef)(null),b=T(y),j=T(R),f=Object(a.useCallback)((function(t){"loading"!==u&&(d.current&&d.current.disconnect(),d.current=new IntersectionObserver((function(t){var n=j!==b;t[0].isIntersecting&&n&&e(_({selection:i,page:j+1}))})),t&&d.current.observe(t))}),[j,u]);return Object(a.useEffect)((function(){e(_(c?{selection:i,page:1}:{selection:"",page:1}))}),[c]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("section",{className:"navbar",children:[Object(B.jsx)("h1",{className:"navbar_title",children:"The Shoppies"}),Object(B.jsx)("input",{className:"navbar_input",type:"text",value:i,placeholder:"Search movie...",onChange:function(e){return s(e.target.value)}})]}),Object(B.jsx)(F,{}),Object(B.jsx)("section",{className:"search-results",children:Object(B.jsx)("ul",{className:"search-results_movie-list list",children:m.map((function(e,t){return m.length===t+1?Object(B.jsx)("li",{ref:f,className:"movie",children:Object(B.jsx)(M,Object(r.a)({},e))},e.imdbID):Object(B.jsx)("li",{className:"movie",children:Object(B.jsx)(M,Object(r.a)({},e))},e.imdbID)}))})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(B.jsx)(i.a.StrictMode,{children:Object(B.jsx)(l.a,{store:C,children:Object(B.jsx)(P,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.d4aa7c96.chunk.js.map